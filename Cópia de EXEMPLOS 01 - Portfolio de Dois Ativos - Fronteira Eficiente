{"nbformat":4,"nbformat_minor":0,"metadata":{"colab":{"name":"Cópia de EXEMPLOS 01 - Portfolio de Dois Ativos - Fronteira Eficiente","provenance":[{"file_id":"1veyxjSxBkI8urQ4q24OOt0WwCgCK2QXL","timestamp":1619015291482},{"file_id":"1DReBWbPxRhidhvp8CNlyy6PVeU_o7V_G","timestamp":1616541433106},{"file_id":"1e6vITrGiy0Lbgyz5lVmT2qq7ghbnhI0B","timestamp":1614291668640},{"file_id":"1wNAmR5bwvskF6HIG7zTOleT7GfT9Wwt_","timestamp":1614088298875},{"file_id":"1M424wGyvsw8HcQdSmGM-f1mcuP33Ts6h","timestamp":1614045450572}],"collapsed_sections":[]},"kernelspec":{"name":"python3","display_name":"Python 3"},"widgets":{"application/vnd.jupyter.widget-state+json":{"b030e8c7d8214fd0959c41ef42f7c88d":{"model_module":"@jupyter-widgets/controls","model_name":"VBoxModel","state":{"_view_name":"VBoxView","_dom_classes":["widget-interact"],"_model_name":"VBoxModel","_view_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_view_count":null,"_view_module_version":"1.5.0","box_style":"","layout":"IPY_MODEL_80b3d67edc3e44baa0ad00521f862cfa","_model_module":"@jupyter-widgets/controls","children":["IPY_MODEL_94da1f28c7ab4223a4527ebc35110650","IPY_MODEL_21734dffcdfc4ebc8197e92a64581855","IPY_MODEL_1f6b5594354b40d6ab924fede259782b"]}},"80b3d67edc3e44baa0ad00521f862cfa":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","state":{"_view_name":"LayoutView","grid_template_rows":null,"right":null,"justify_content":null,"_view_module":"@jupyter-widgets/base","overflow":null,"_model_module_version":"1.2.0","_view_count":null,"flex_flow":null,"width":null,"min_width":null,"border":null,"align_items":null,"bottom":null,"_model_module":"@jupyter-widgets/base","top":null,"grid_column":null,"overflow_y":null,"overflow_x":null,"grid_auto_flow":null,"grid_area":null,"grid_template_columns":null,"flex":null,"_model_name":"LayoutModel","justify_items":null,"grid_row":null,"max_height":null,"align_content":null,"visibility":null,"align_self":null,"height":null,"min_height":null,"padding":null,"grid_auto_rows":null,"grid_gap":null,"max_width":null,"order":null,"_view_module_version":"1.2.0","grid_template_areas":null,"object_position":null,"object_fit":null,"grid_auto_columns":null,"margin":null,"display":null,"left":null}},"94da1f28c7ab4223a4527ebc35110650":{"model_module":"@jupyter-widgets/controls","model_name":"IntSliderModel","state":{"_view_name":"IntSliderView","style":"IPY_MODEL_00b42aa856284fa491ebbf8216875122","_dom_classes":[],"description":"w1","step":1,"_model_name":"IntSliderModel","orientation":"horizontal","max":100,"_view_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","value":50,"_view_count":null,"disabled":false,"_view_module_version":"1.5.0","min":0,"continuous_update":true,"readout_format":"d","description_tooltip":null,"readout":true,"_model_module":"@jupyter-widgets/controls","layout":"IPY_MODEL_6fbabf74db2b42b09fec510008fb481a"}},"21734dffcdfc4ebc8197e92a64581855":{"model_module":"@jupyter-widgets/controls","model_name":"CheckboxModel","state":{"_view_name":"CheckboxView","style":"IPY_MODEL_d7c32aaf8f264185a04af0bfea0b02ce","_dom_classes":[],"description":"mostrar_curvas","_model_name":"CheckboxModel","_view_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","value":false,"_view_count":null,"disabled":false,"_view_module_version":"1.5.0","indent":true,"description_tooltip":null,"_model_module":"@jupyter-widgets/controls","layout":"IPY_MODEL_b982f3d7011742ebbc82bcb8207d1185"}},"1f6b5594354b40d6ab924fede259782b":{"model_module":"@jupyter-widgets/output","model_name":"OutputModel","state":{"_view_name":"OutputView","msg_id":"","_dom_classes":[],"_model_name":"OutputModel","outputs":[{"output_type":"display_data","metadata":{"tags":[]},"text/html":"<html>\n<head><meta charset=\"utf-8\" /></head>\n<body>\n    <div>\n            <script src=\"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG\"></script><script type=\"text/javascript\">if (window.MathJax) {MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});}</script>\n                <script type=\"text/javascript\">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>\n        <script src=\"https://cdn.plot.ly/plotly-latest.min.js\"></script>    \n            <div id=\"69748265-f91e-48e9-a25d-d6c6ea5e2609\" class=\"plotly-graph-div\" style=\"height:525px; width:100%;\"></div>\n            <script type=\"text/javascript\">\n                \n                    window.PLOTLYENV=window.PLOTLYENV || {};\n                    \n                if (document.getElementById(\"69748265-f91e-48e9-a25d-d6c6ea5e2609\")) {\n                    Plotly.newPlot(\n                        '69748265-f91e-48e9-a25d-d6c6ea5e2609',\n                        [{\"hovertemplate\": \"<b>retorno: </b> %{y:.1%}<br><b>volatilidade:</b> %{x:.1%}\", \"mode\": \"markers+text\", \"name\": \"CARTEIRA\", \"text\": [\"CARTEIRA\"], \"textfont\": {\"color\": \"white\", \"size\": 12}, \"textposition\": \"top center\", \"type\": \"scatter\", \"x\": [0.5271382047730908], \"y\": [1.1650523026688984]}, {\"hovertemplate\": \"<b>retorno: </b> %{y:.1%}<br><b>volatilidade:</b> %{x:.1%}\", \"mode\": \"markers+text\", \"name\": \"A\\u00e7\\u00f5es\", \"text\": [\"MGLU3\", \"VALE3\"], \"textfont\": {\"color\": \"white\", \"size\": 12}, \"textposition\": \"top center\", \"type\": \"scatter\", \"x\": [0.6849411656776586, 0.5256887784385438], \"y\": [1.1245520992014495, 1.2055525061363452]}, {\"hovertemplate\": \"<b>retorno: </b> %{y:.1%}<br><b>volatilidade:</b> %{x:.1%}\", \"mode\": \"lines\", \"name\": \"Curva\", \"textfont\": {\"color\": \"white\", \"size\": 12}, \"textposition\": \"top center\", \"type\": \"scatter\", \"visible\": false, \"x\": [0.5256887784385438, 0.5239462980491894, 0.5222706694713318, 0.5206625381453491, 0.5191225313480651, 0.5176512570890072, 0.5162493030172316, 0.514917235342795, 0.5136555977770494, 0.5124649104959971, 0.5113456691309545, 0.5102983437908046, 0.5093233781200641, 0.5084211883969547, 0.5075921626755582, 0.5068366599760421, 0.506155009526757, 0.5055475100618477, 0.5050144291777988, 0.5045560027520862, 0.5041724344268433, 0.5038638951601488, 0.5036305228472228, 0.5034724220134776, 0.5033896635810167, 0.5033822847097842, 0.5034502887142053, 0.5035936450557457, 0.5038122894114331, 0.5041061238179793, 0.5044750168907551, 0.5049188041164722, 0.5054372882180646, 0.5060302395898831, 0.5066973968009895, 0.5074384671639958, 0.5082531273666036, 0.5091410241627186, 0.5101017751197622, 0.5111349694185908, 0.5122401687022374, 0.5134169079695279, 0.5146646965095101, 0.5159830188725235, 0.5173713358736846, 0.5188290856245248, 0.5203556845885141, 0.5219505286562348, 0.523612994236016, 0.5253424393559225, 0.5271382047730908, 0.5289996150865368, 0.5309259798496893, 0.5329165946790763, 0.5349707423557609, 0.5370876939163163, 0.5392667097303152, 0.5415070405615383, 0.5438079286102878, 0.5461686085344432, 0.5485883084470802, 0.5510662508887197, 0.5536016537724673, 0.5561937313005368, 0.5588416948508391, 0.5615447538325361, 0.5643021165096505, 0.5671129907919933, 0.5699765849928828, 0.5728921085532596, 0.5758587727319889, 0.5788757912622755, 0.5819423809742681, 0.5850577623840371, 0.5882211602492501, 0.5914318040919615, 0.5946889286890356, 0.5979917745307993, 0.6013395882486176, 0.6047316230121267, 0.608167138896937, 0.6116454032236598, 0.6151656908691522, 0.6187272845509162, 0.6223294750856021, 0.6259715616225968, 0.6296528518536906, 0.6333726621998148, 0.6371303179758568, 0.640925153534556, 0.6447565123904622, 0.6486237473249585, 0.6525262204733029, 0.6564633033946494, 0.6604343771259941, 0.6644388322209384, 0.6684760687741863, 0.6725454964326195, 0.6766465343938054, 0.6807786113927475, 0.6849411656776586], \"y\": [1.2055525061363452, 1.2047425020669964, 1.2039324979976471, 1.2031224939283003, 1.2023124898589497, 1.2015024857896002, 1.2006924817202511, 1.1998824776509036, 1.1990724735815559, 1.198262469512206, 1.1974524654428562, 1.1966424613735078, 1.1958324573041579, 1.1950224532348084, 1.1942124491654602, 1.1934024450961114, 1.1925924410267614, 1.1917824369574135, 1.190972432888064, 1.190162428818716, 1.1893524247493668, 1.1885424206800177, 1.1877324166106689, 1.1869224125413187, 1.1861124084719712, 1.185302404402621, 1.184492400333273, 1.1836823962639231, 1.1828723921945752, 1.1820623881252266, 1.181252384055877, 1.1804423799865278, 1.179632375917179, 1.178822371847829, 1.1780123677784813, 1.1772023637091302, 1.176392359639783, 1.175582355570435, 1.1747723515010844, 1.1739623474317358, 1.1731523433623883, 1.1723423392930385, 1.1715323352236895, 1.1707223311543398, 1.1699123270849916, 1.1691023230156423, 1.1682923189462935, 1.1674823148769449, 1.1666723108075958, 1.1658623067382463, 1.1650523026688984, 1.1642422985995484, 1.1634322945301991, 1.1626222904608503, 1.1618122863915017, 1.1610022823221533, 1.1601922782528018, 1.159382274183454, 1.1585722701141052, 1.157762266044757, 1.156952261975407, 1.1561422579060594, 1.1553322538367092, 1.1545222497673604, 1.1537122456980113, 1.1529022416286636, 1.152092237559315, 1.1512822334899653, 1.1504722294206158, 1.1496622253512654, 1.148852221281918, 1.148042217212569, 1.1472322131432202, 1.1464222090738716, 1.1456122050045228, 1.1448022009351748, 1.1439921968658235, 1.1431821927964763, 1.1423721887271254, 1.1415621846577768, 1.1407521805884282, 1.1399421765190783, 1.1391321724497294, 1.1383221683803804, 1.137512164311033, 1.1367021602416845, 1.1358921561723343, 1.135082152102986, 1.134272148033637, 1.1334621439642862, 1.132652139894938, 1.131842135825591, 1.131032131756241, 1.1302221276868911, 1.129412123617542, 1.1286021195481932, 1.127792115478844, 1.1269821114094962, 1.1261721073401467, 1.1253621032707974, 1.1245520992014495]}, {\"hovertemplate\": \"<b>retorno: </b> %{y:.1%}<br><b>volatilidade:</b> %{x:.1%}\", \"mode\": \"markers\", \"name\": \"Carteira de M\\u00ednima Vari\\u00e2ncia\", \"textfont\": {\"color\": \"white\", \"size\": 12}, \"textposition\": \"top center\", \"type\": \"scatter\", \"visible\": false, \"x\": [0.5033822847097842], \"y\": [1.185302404402621]}, {\"hovertemplate\": \"<b>retorno: </b> %{y:.1%}<br><b>volatilidade:</b> %{x:.1%}\", \"line\": {\"color\": \"red\"}, \"mode\": \"lines\", \"name\": \"Fronteira Eficiente\", \"textfont\": {\"color\": \"white\", \"size\": 12}, \"textposition\": \"top center\", \"type\": \"scatter\", \"visible\": false, \"x\": [0.5256887784385438, 0.5239462980491894, 0.5222706694713318, 0.5206625381453491, 0.5191225313480651, 0.5176512570890072, 0.5162493030172316, 0.514917235342795, 0.5136555977770494, 0.5124649104959971, 0.5113456691309545, 0.5102983437908046, 0.5093233781200641, 0.5084211883969547, 0.5075921626755582, 0.5068366599760421, 0.506155009526757, 0.5055475100618477, 0.5050144291777988, 0.5045560027520862, 0.5041724344268433, 0.5038638951601488, 0.5036305228472228, 0.5034724220134776, 0.5033896635810167, 0.5033822847097842], \"y\": [1.2055525061363452, 1.2047425020669964, 1.2039324979976471, 1.2031224939283003, 1.2023124898589497, 1.2015024857896002, 1.2006924817202511, 1.1998824776509036, 1.1990724735815559, 1.198262469512206, 1.1974524654428562, 1.1966424613735078, 1.1958324573041579, 1.1950224532348084, 1.1942124491654602, 1.1934024450961114, 1.1925924410267614, 1.1917824369574135, 1.190972432888064, 1.190162428818716, 1.1893524247493668, 1.1885424206800177, 1.1877324166106689, 1.1869224125413187, 1.1861124084719712, 1.185302404402621]}],\n                        {\"autosize\": false, \"template\": {\"data\": {\"bar\": [{\"error_x\": {\"color\": \"#f2f5fa\"}, \"error_y\": {\"color\": \"#f2f5fa\"}, \"marker\": {\"line\": {\"color\": \"rgb(17,17,17)\", \"width\": 0.5}}, \"type\": \"bar\"}], \"barpolar\": [{\"marker\": {\"line\": {\"color\": \"rgb(17,17,17)\", \"width\": 0.5}}, \"type\": \"barpolar\"}], \"carpet\": [{\"aaxis\": {\"endlinecolor\": \"#A2B1C6\", \"gridcolor\": \"#506784\", \"linecolor\": \"#506784\", \"minorgridcolor\": \"#506784\", \"startlinecolor\": \"#A2B1C6\"}, \"baxis\": {\"endlinecolor\": \"#A2B1C6\", \"gridcolor\": \"#506784\", \"linecolor\": \"#506784\", \"minorgridcolor\": \"#506784\", \"startlinecolor\": \"#A2B1C6\"}, \"type\": \"carpet\"}], \"choropleth\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"type\": \"choropleth\"}], \"contour\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"colorscale\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"type\": \"contour\"}], \"contourcarpet\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"type\": \"contourcarpet\"}], \"heatmap\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"colorscale\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"type\": \"heatmap\"}], \"heatmapgl\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"colorscale\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"type\": \"heatmapgl\"}], \"histogram\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"histogram\"}], \"histogram2d\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"colorscale\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"type\": \"histogram2d\"}], \"histogram2dcontour\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"colorscale\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"type\": \"histogram2dcontour\"}], \"mesh3d\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"type\": \"mesh3d\"}], \"parcoords\": [{\"line\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"parcoords\"}], \"pie\": [{\"automargin\": true, \"type\": \"pie\"}], \"scatter\": [{\"marker\": {\"line\": {\"color\": \"#283442\"}}, \"type\": \"scatter\"}], \"scatter3d\": [{\"line\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scatter3d\"}], \"scattercarpet\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scattercarpet\"}], \"scattergeo\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scattergeo\"}], \"scattergl\": [{\"marker\": {\"line\": {\"color\": \"#283442\"}}, \"type\": \"scattergl\"}], \"scattermapbox\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scattermapbox\"}], \"scatterpolar\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scatterpolar\"}], \"scatterpolargl\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scatterpolargl\"}], \"scatterternary\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scatterternary\"}], \"surface\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"colorscale\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"type\": \"surface\"}], \"table\": [{\"cells\": {\"fill\": {\"color\": \"#506784\"}, \"line\": {\"color\": \"rgb(17,17,17)\"}}, \"header\": {\"fill\": {\"color\": \"#2a3f5f\"}, \"line\": {\"color\": \"rgb(17,17,17)\"}}, \"type\": \"table\"}]}, \"layout\": {\"annotationdefaults\": {\"arrowcolor\": \"#f2f5fa\", \"arrowhead\": 0, \"arrowwidth\": 1}, \"coloraxis\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"colorscale\": {\"diverging\": [[0, \"#8e0152\"], [0.1, \"#c51b7d\"], [0.2, \"#de77ae\"], [0.3, \"#f1b6da\"], [0.4, \"#fde0ef\"], [0.5, \"#f7f7f7\"], [0.6, \"#e6f5d0\"], [0.7, \"#b8e186\"], [0.8, \"#7fbc41\"], [0.9, \"#4d9221\"], [1, \"#276419\"]], \"sequential\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"sequentialminus\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]]}, \"colorway\": [\"#636efa\", \"#EF553B\", \"#00cc96\", \"#ab63fa\", \"#FFA15A\", \"#19d3f3\", \"#FF6692\", \"#B6E880\", \"#FF97FF\", \"#FECB52\"], \"font\": {\"color\": \"#f2f5fa\"}, \"geo\": {\"bgcolor\": \"rgb(17,17,17)\", \"lakecolor\": \"rgb(17,17,17)\", \"landcolor\": \"rgb(17,17,17)\", \"showlakes\": true, \"showland\": true, \"subunitcolor\": \"#506784\"}, \"hoverlabel\": {\"align\": \"left\"}, \"hovermode\": \"closest\", \"mapbox\": {\"style\": \"dark\"}, \"paper_bgcolor\": \"rgb(17,17,17)\", \"plot_bgcolor\": \"rgb(17,17,17)\", \"polar\": {\"angularaxis\": {\"gridcolor\": \"#506784\", \"linecolor\": \"#506784\", \"ticks\": \"\"}, \"bgcolor\": \"rgb(17,17,17)\", \"radialaxis\": {\"gridcolor\": \"#506784\", \"linecolor\": \"#506784\", \"ticks\": \"\"}}, \"scene\": {\"xaxis\": {\"backgroundcolor\": \"rgb(17,17,17)\", \"gridcolor\": \"#506784\", \"gridwidth\": 2, \"linecolor\": \"#506784\", \"showbackground\": true, \"ticks\": \"\", \"zerolinecolor\": \"#C8D4E3\"}, \"yaxis\": {\"backgroundcolor\": \"rgb(17,17,17)\", \"gridcolor\": \"#506784\", \"gridwidth\": 2, \"linecolor\": \"#506784\", \"showbackground\": true, \"ticks\": \"\", \"zerolinecolor\": \"#C8D4E3\"}, \"zaxis\": {\"backgroundcolor\": \"rgb(17,17,17)\", \"gridcolor\": \"#506784\", \"gridwidth\": 2, \"linecolor\": \"#506784\", \"showbackground\": true, \"ticks\": \"\", \"zerolinecolor\": \"#C8D4E3\"}}, \"shapedefaults\": {\"line\": {\"color\": \"#f2f5fa\"}}, \"sliderdefaults\": {\"bgcolor\": \"#C8D4E3\", \"bordercolor\": \"rgb(17,17,17)\", \"borderwidth\": 1, \"tickwidth\": 0}, \"ternary\": {\"aaxis\": {\"gridcolor\": \"#506784\", \"linecolor\": \"#506784\", \"ticks\": \"\"}, \"baxis\": {\"gridcolor\": \"#506784\", \"linecolor\": \"#506784\", \"ticks\": \"\"}, \"bgcolor\": \"rgb(17,17,17)\", \"caxis\": {\"gridcolor\": \"#506784\", \"linecolor\": \"#506784\", \"ticks\": \"\"}}, \"title\": {\"x\": 0.05}, \"updatemenudefaults\": {\"bgcolor\": \"#506784\", \"borderwidth\": 0}, \"xaxis\": {\"automargin\": true, \"gridcolor\": \"#283442\", \"linecolor\": \"#506784\", \"ticks\": \"\", \"title\": {\"standoff\": 15}, \"zerolinecolor\": \"#283442\", \"zerolinewidth\": 2}, \"yaxis\": {\"automargin\": true, \"gridcolor\": \"#283442\", \"linecolor\": \"#506784\", \"ticks\": \"\", \"title\": {\"standoff\": 15}, \"zerolinecolor\": \"#283442\", \"zerolinewidth\": 2}}}, \"title\": {\"text\": \"<b>MGLU3:</b> 50%  <b>VALE3:</b> 50%\"}, \"xaxis\": {\"range\": [0.4533822847097842, 0.7349411656776587], \"tickformat\": \".0%\", \"title\": {\"text\": \"Volatilidade\"}}, \"yaxis\": {\"range\": [1.0745520992014495, 1.2555525061363453], \"tickformat\": \".0%\", \"title\": {\"text\": \"Retorno Esperado\"}}},\n                        {\"displayModeBar\": true, \"responsive\": true}\n                    ).then(function(){\n                            \nvar gd = document.getElementById('69748265-f91e-48e9-a25d-d6c6ea5e2609');\nvar x = new MutationObserver(function (mutations, observer) {{\n        var display = window.getComputedStyle(gd).display;\n        if (!display || display === 'none') {{\n            console.log([gd, 'removed!']);\n            Plotly.purge(gd);\n            observer.disconnect();\n        }}\n}});\n\n// Listen for the removal of the full notebook cells\nvar notebookContainer = gd.closest('#notebook-container');\nif (notebookContainer) {{\n    x.observe(notebookContainer, {childList: true});\n}}\n\n// Listen for the clearing of the current output cell\nvar outputEl = gd.closest('.output');\nif (outputEl) {{\n    x.observe(outputEl, {childList: true});\n}}\n\n                        })\n                };\n                \n            </script>\n        </div>\n</body>\n</html>"}],"_view_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_view_count":null,"_view_module_version":"1.0.0","layout":"IPY_MODEL_a49bf9f2d2504167be0f116e0d95a3fa","_model_module":"@jupyter-widgets/output"}},"00b42aa856284fa491ebbf8216875122":{"model_module":"@jupyter-widgets/controls","model_name":"SliderStyleModel","state":{"_view_name":"StyleView","handle_color":null,"_model_name":"SliderStyleModel","description_width":"","_view_module":"@jupyter-widgets/base","_model_module_version":"1.5.0","_view_count":null,"_view_module_version":"1.2.0","_model_module":"@jupyter-widgets/controls"}},"6fbabf74db2b42b09fec510008fb481a":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","state":{"_view_name":"LayoutView","grid_template_rows":null,"right":null,"justify_content":null,"_view_module":"@jupyter-widgets/base","overflow":null,"_model_module_version":"1.2.0","_view_count":null,"flex_flow":null,"width":null,"min_width":null,"border":null,"align_items":null,"bottom":null,"_model_module":"@jupyter-widgets/base","top":null,"grid_column":null,"overflow_y":null,"overflow_x":null,"grid_auto_flow":null,"grid_area":null,"grid_template_columns":null,"flex":null,"_model_name":"LayoutModel","justify_items":null,"grid_row":null,"max_height":null,"align_content":null,"visibility":null,"align_self":null,"height":null,"min_height":null,"padding":null,"grid_auto_rows":null,"grid_gap":null,"max_width":null,"order":null,"_view_module_version":"1.2.0","grid_template_areas":null,"object_position":null,"object_fit":null,"grid_auto_columns":null,"margin":null,"display":null,"left":null}},"d7c32aaf8f264185a04af0bfea0b02ce":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","state":{"_view_name":"StyleView","_model_name":"DescriptionStyleModel","description_width":"","_view_module":"@jupyter-widgets/base","_model_module_version":"1.5.0","_view_count":null,"_view_module_version":"1.2.0","_model_module":"@jupyter-widgets/controls"}},"b982f3d7011742ebbc82bcb8207d1185":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","state":{"_view_name":"LayoutView","grid_template_rows":null,"right":null,"justify_content":null,"_view_module":"@jupyter-widgets/base","overflow":null,"_model_module_version":"1.2.0","_view_count":null,"flex_flow":null,"width":null,"min_width":null,"border":null,"align_items":null,"bottom":null,"_model_module":"@jupyter-widgets/base","top":null,"grid_column":null,"overflow_y":null,"overflow_x":null,"grid_auto_flow":null,"grid_area":null,"grid_template_columns":null,"flex":null,"_model_name":"LayoutModel","justify_items":null,"grid_row":null,"max_height":null,"align_content":null,"visibility":null,"align_self":null,"height":null,"min_height":null,"padding":null,"grid_auto_rows":null,"grid_gap":null,"max_width":null,"order":null,"_view_module_version":"1.2.0","grid_template_areas":null,"object_position":null,"object_fit":null,"grid_auto_columns":null,"margin":null,"display":null,"left":null}},"a49bf9f2d2504167be0f116e0d95a3fa":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","state":{"_view_name":"LayoutView","grid_template_rows":null,"right":null,"justify_content":null,"_view_module":"@jupyter-widgets/base","overflow":null,"_model_module_version":"1.2.0","_view_count":null,"flex_flow":null,"width":null,"min_width":null,"border":null,"align_items":null,"bottom":null,"_model_module":"@jupyter-widgets/base","top":null,"grid_column":null,"overflow_y":null,"overflow_x":null,"grid_auto_flow":null,"grid_area":null,"grid_template_columns":null,"flex":null,"_model_name":"LayoutModel","justify_items":null,"grid_row":null,"max_height":null,"align_content":null,"visibility":null,"align_self":null,"height":null,"min_height":null,"padding":null,"grid_auto_rows":null,"grid_gap":null,"max_width":null,"order":null,"_view_module_version":"1.2.0","grid_template_areas":null,"object_position":null,"object_fit":null,"grid_auto_columns":null,"margin":null,"display":null,"left":null}}}}},"cells":[{"cell_type":"code","metadata":{"id":"SsK1cc_ZT4Hm"},"source":["tickers = ['MGLU3.SA', 'VALE3.SA']\n","periodo = '1y'  # Opções: 1d,5d,1mo,3mo,6mo,1y,2y,5y,10y,ytd,max"],"execution_count":null,"outputs":[]},{"cell_type":"markdown","metadata":{"id":"OtPjYfqnT5td"},"source":["## Baixando Cotações e Calculando Retornos"]},{"cell_type":"code","metadata":{"id":"3iiRmjyfKtp1"},"source":["!pip install -q yfinance"],"execution_count":null,"outputs":[]},{"cell_type":"code","metadata":{"id":"S1BGS8EvKzuR"},"source":["import yfinance as yf\n","import pandas as pd\n","import numpy as np\n","\n","import plotly.graph_objects as go\n","\n","from ipywidgets import interact"],"execution_count":null,"outputs":[]},{"cell_type":"code","metadata":{"id":"BkD2E3CnSQ8_"},"source":["def fix_col_names(df):\n","  return ['IBOV' if col =='^BVSP' else col.rstrip('.SA') for col in df.columns]"],"execution_count":null,"outputs":[]},{"cell_type":"code","metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"hNSCGgB5pjhk","executionInfo":{"status":"ok","timestamp":1615316930083,"user_tz":180,"elapsed":4632,"user":{"displayName":"Codigo Quant","photoUrl":"https://lh3.googleusercontent.com/a-/AOh14GjEZ8nzU9qu4Xt8sG8ukRRv3yzkPKR9vA6aleXF=s64","userId":"12293784921357626700"}},"outputId":"004ea93e-8266-477f-f38a-5c11a91b5d52"},"source":["prices = yf.download(tickers, period=periodo, rounding=True )['Adj Close']\n","prices.columns = fix_col_names(prices)\n","prices.dropna(inplace=True)\n","retorno = prices.pct_change().dropna()\n","ativos = retorno.columns.to_list()"],"execution_count":null,"outputs":[{"output_type":"stream","text":["[*********************100%***********************]  2 of 2 completed\n"],"name":"stdout"}]},{"cell_type":"code","metadata":{"colab":{"base_uri":"https://localhost:8080/","height":235},"id":"tJI_fGxRp87c","executionInfo":{"status":"ok","timestamp":1615316930083,"user_tz":180,"elapsed":4630,"user":{"displayName":"Codigo Quant","photoUrl":"https://lh3.googleusercontent.com/a-/AOh14GjEZ8nzU9qu4Xt8sG8ukRRv3yzkPKR9vA6aleXF=s64","userId":"12293784921357626700"}},"outputId":"c4336174-c318-478f-8919-339d639092f5"},"source":["prices.tail()"],"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/html":["<div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>MGLU3</th>\n","      <th>VALE3</th>\n","    </tr>\n","    <tr>\n","      <th>Date</th>\n","      <th></th>\n","      <th></th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>2021-03-03</th>\n","      <td>25.12</td>\n","      <td>96.02</td>\n","    </tr>\n","    <tr>\n","      <th>2021-03-04</th>\n","      <td>25.44</td>\n","      <td>94.60</td>\n","    </tr>\n","    <tr>\n","      <th>2021-03-05</th>\n","      <td>25.13</td>\n","      <td>100.21</td>\n","    </tr>\n","    <tr>\n","      <th>2021-03-08</th>\n","      <td>23.10</td>\n","      <td>99.67</td>\n","    </tr>\n","    <tr>\n","      <th>2021-03-09</th>\n","      <td>23.37</td>\n","      <td>98.32</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>"],"text/plain":["            MGLU3   VALE3\n","Date                     \n","2021-03-03  25.12   96.02\n","2021-03-04  25.44   94.60\n","2021-03-05  25.13  100.21\n","2021-03-08  23.10   99.67\n","2021-03-09  23.37   98.32"]},"metadata":{"tags":[]},"execution_count":32}]},{"cell_type":"code","metadata":{"colab":{"base_uri":"https://localhost:8080/","height":235},"id":"hOEoIyp1akqY","executionInfo":{"status":"ok","timestamp":1615316930083,"user_tz":180,"elapsed":4628,"user":{"displayName":"Codigo Quant","photoUrl":"https://lh3.googleusercontent.com/a-/AOh14GjEZ8nzU9qu4Xt8sG8ukRRv3yzkPKR9vA6aleXF=s64","userId":"12293784921357626700"}},"outputId":"53e92250-cd5e-4eae-9a4b-3d4ca289cea2"},"source":["retorno.tail()"],"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/html":["<div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>MGLU3</th>\n","      <th>VALE3</th>\n","    </tr>\n","    <tr>\n","      <th>Date</th>\n","      <th></th>\n","      <th></th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>2021-03-03</th>\n","      <td>0.035023</td>\n","      <td>-0.012343</td>\n","    </tr>\n","    <tr>\n","      <th>2021-03-04</th>\n","      <td>0.012739</td>\n","      <td>-0.014789</td>\n","    </tr>\n","    <tr>\n","      <th>2021-03-05</th>\n","      <td>-0.012186</td>\n","      <td>0.059302</td>\n","    </tr>\n","    <tr>\n","      <th>2021-03-08</th>\n","      <td>-0.080780</td>\n","      <td>-0.005389</td>\n","    </tr>\n","    <tr>\n","      <th>2021-03-09</th>\n","      <td>0.011688</td>\n","      <td>-0.013545</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>"],"text/plain":["               MGLU3     VALE3\n","Date                          \n","2021-03-03  0.035023 -0.012343\n","2021-03-04  0.012739 -0.014789\n","2021-03-05 -0.012186  0.059302\n","2021-03-08 -0.080780 -0.005389\n","2021-03-09  0.011688 -0.013545"]},"metadata":{"tags":[]},"execution_count":33}]},{"cell_type":"markdown","metadata":{"id":"4E8sEQ1cLn8c"},"source":["## 1. Criando a Carteira"]},{"cell_type":"code","metadata":{"id":"DzFw5QWDa3zI"},"source":["def calcula_carteira(df, w1):\n","  pesos = [w1,(1-w1)]  \n","  df2 = df.dot(pesos).copy()\n","  return  df2.mean() * 252, df2.std() * np.sqrt(252)"],"execution_count":null,"outputs":[]},{"cell_type":"code","metadata":{"colab":{"base_uri":"https://localhost:8080/","height":419},"id":"sJ8kzdwrGlRN","executionInfo":{"status":"ok","timestamp":1615316930084,"user_tz":180,"elapsed":4624,"user":{"displayName":"Codigo Quant","photoUrl":"https://lh3.googleusercontent.com/a-/AOh14GjEZ8nzU9qu4Xt8sG8ukRRv3yzkPKR9vA6aleXF=s64","userId":"12293784921357626700"}},"outputId":"d64d9751-f8ce-43d3-ccfd-feb2a29f6515"},"source":["# Criando 100 carteiras de dois ativos com pesos variáveis\n","carteira = pd.DataFrame()\n","for i in np.linspace(0,1, 101):\n","  media, std = calcula_carteira(retorno,i)\n","  carteira.at[i,'retorno'] = media\n","  carteira.at[i,'volatilidade'] = std\n","\n","carteira"],"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/html":["<div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>retorno</th>\n","      <th>volatilidade</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0.00</th>\n","      <td>1.205553</td>\n","      <td>0.525689</td>\n","    </tr>\n","    <tr>\n","      <th>0.01</th>\n","      <td>1.204743</td>\n","      <td>0.523946</td>\n","    </tr>\n","    <tr>\n","      <th>0.02</th>\n","      <td>1.203932</td>\n","      <td>0.522271</td>\n","    </tr>\n","    <tr>\n","      <th>0.03</th>\n","      <td>1.203122</td>\n","      <td>0.520663</td>\n","    </tr>\n","    <tr>\n","      <th>0.04</th>\n","      <td>1.202312</td>\n","      <td>0.519123</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>0.96</th>\n","      <td>1.127792</td>\n","      <td>0.668476</td>\n","    </tr>\n","    <tr>\n","      <th>0.97</th>\n","      <td>1.126982</td>\n","      <td>0.672545</td>\n","    </tr>\n","    <tr>\n","      <th>0.98</th>\n","      <td>1.126172</td>\n","      <td>0.676647</td>\n","    </tr>\n","    <tr>\n","      <th>0.99</th>\n","      <td>1.125362</td>\n","      <td>0.680779</td>\n","    </tr>\n","    <tr>\n","      <th>1.00</th>\n","      <td>1.124552</td>\n","      <td>0.684941</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>101 rows × 2 columns</p>\n","</div>"],"text/plain":["       retorno  volatilidade\n","0.00  1.205553      0.525689\n","0.01  1.204743      0.523946\n","0.02  1.203932      0.522271\n","0.03  1.203122      0.520663\n","0.04  1.202312      0.519123\n","...        ...           ...\n","0.96  1.127792      0.668476\n","0.97  1.126982      0.672545\n","0.98  1.126172      0.676647\n","0.99  1.125362      0.680779\n","1.00  1.124552      0.684941\n","\n","[101 rows x 2 columns]"]},"metadata":{"tags":[]},"execution_count":35}]},{"cell_type":"code","metadata":{"id":"M5FbWKZUOzHT"},"source":["# Carteira de volatilidade mínima\n","min_vol_idx = carteira['volatilidade'].idxmin()"],"execution_count":null,"outputs":[]},{"cell_type":"code","metadata":{"id":"Ge2PUMdKOlM7"},"source":["# Calcula a fronteira eficiente\n","if (carteira['retorno'].iloc[0] > carteira['retorno'].iloc[-1]):\n","  fe = carteira.loc[:min_vol_idx, :]\n","else:\n","  fe = carteira.loc[min_vol_idx:, :]"],"execution_count":null,"outputs":[]},{"cell_type":"markdown","metadata":{"id":"9KSTFmaOHhH7"},"source":["## 2. Gráfico"]},{"cell_type":"code","metadata":{"colab":{"base_uri":"https://localhost:8080/","height":606,"referenced_widgets":["b030e8c7d8214fd0959c41ef42f7c88d","80b3d67edc3e44baa0ad00521f862cfa","94da1f28c7ab4223a4527ebc35110650","21734dffcdfc4ebc8197e92a64581855","1f6b5594354b40d6ab924fede259782b","00b42aa856284fa491ebbf8216875122","6fbabf74db2b42b09fec510008fb481a","d7c32aaf8f264185a04af0bfea0b02ce","b982f3d7011742ebbc82bcb8207d1185","a49bf9f2d2504167be0f116e0d95a3fa"]},"id":"ZTRv1vurZbTe","executionInfo":{"status":"ok","timestamp":1615318699694,"user_tz":180,"elapsed":1463,"user":{"displayName":"Codigo Quant","photoUrl":"https://lh3.googleusercontent.com/a-/AOh14GjEZ8nzU9qu4Xt8sG8ukRRv3yzkPKR9vA6aleXF=s64","userId":"12293784921357626700"}},"outputId":"d3e5b0e3-f2ad-4544-99b0-e4d7c3e219bb"},"source":["def gerar_grafico(w1, mostrar_curvas):\n","  fig = go.Figure()\n","\n","  # Desenha um ponto com o retorno e a volatilidade da carteira\n","  fig.add_scatter(y=[carteira.iloc[w1]['retorno']], \n","                  x=[carteira.iloc[w1]['volatilidade']], \n","                  text=['CARTEIRA'],\n","                  mode='markers+text', name='CARTEIRA')\n","  \n","  # Desenha os pontos das ações individuais\n","  fig.add_scatter(y=carteira.iloc[[-1,0]]['retorno'], \n","                  x=carteira.iloc[[-1,0]]['volatilidade'], \n","                  text=ativos,\n","                  mode='markers+text', name='Ações')\n","  \n","  # Desenha a curva\n","  fig.add_scatter(y=carteira['retorno'], \n","                  x=carteira['volatilidade'],                  \n","                  mode='lines', name='Curva', \n","                  visible=mostrar_curvas)\n","\n","  # Plota carteira de volatilidade mínima   \n","  fig.add_scatter(y=[carteira.loc[min_vol_idx]['retorno']], \n","                  x=[carteira.loc[min_vol_idx]['volatilidade']],                  \n","                  mode='markers', \n","                  name='Carteira de Mínima Variância',\n","                  visible=mostrar_curvas)\n","      \n","  # Desenha a fronteira eficiente\n","  fig.add_scatter(y=fe['retorno'], \n","                  x=fe['volatilidade'],                  \n","                  mode='lines', name='Fronteira Eficiente', \n","                  line={'color':'red'},\n","                  visible=mostrar_curvas)\n","                \n","  fig.update_traces(textfont_size=12, \n","                  textposition='top center', \n","                  textfont_color='white',\n","                  hovertemplate='<b>retorno: </b> %{y:.1%}'+\n","                                '<br><b>volatilidade:</b> %{x:.1%}')\n","  fig.layout.autosize = False\n","  fig.layout.xaxis.title='Volatilidade'\n","  fig.layout.yaxis.title='Retorno Esperado'\n","  fig.layout.xaxis.range = [carteira['volatilidade'].min()-0.05, carteira['volatilidade'].max()+0.05]\n","  fig.layout.yaxis.range = [carteira['retorno'].min()-0.05, carteira['retorno'].max()+0.05]\n","  fig.layout.xaxis.tickformat = '.0%'\n","  fig.layout.yaxis.tickformat = '.0%'\n","  fig.layout.title = f\"<b>{ativos[0]}:</b> {w1}%  <b>{ativos[1]}:</b> {100-w1}%\"\n","  fig.layout.template = 'plotly_dark'\n","                   \n","  fig.show(config=dict(\n","                    displayModeBar=True\n","                ))\n","\n","interact(gerar_grafico, w1=(0,100, 1), mostrar_curvas=False);"],"execution_count":null,"outputs":[{"output_type":"display_data","data":{"application/vnd.jupyter.widget-view+json":{"model_id":"b030e8c7d8214fd0959c41ef42f7c88d","version_minor":0,"version_major":2},"text/plain":["interactive(children=(IntSlider(value=50, description='w1'), Checkbox(value=False, description='mostrar_curvas…"]},"metadata":{"tags":[]}}]},{"cell_type":"markdown","metadata":{"id":"rdz3124RY5l1"},"source":["## 3. Formulação Matemática"]},{"cell_type":"markdown","metadata":{"id":"NE9pLcWH6B42"},"source":["$$R_P = w_1R_1 + w_2R_2$$"]},{"cell_type":"markdown","metadata":{"id":"T6X5dw5e4Jfn"},"source":["$$\\sigma_{p} = \\sqrt{ w_1^2.\\sigma_1^2 + w_2^2.\\sigma_2^2 + 2.\\rho_{12}.w_1.w_2. \\sigma_1 . \\sigma_2 }$$"]}]}